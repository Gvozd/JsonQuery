{
    "lex": {
        "rules": [
            ["(\\w|\\d)+", "return 'identity';"],
            ["\\s*>\\s*", "return '>';"],
            ["\\s+", "return 'space';"],
            ["\\.", "return '.';"],
            ["\\*", "return '*';"],
            ["\\s*,\\s*", "return ',';"],
            ["$", "return 'EOF';"]
        ]
    },

    "operators": [
        ["left", "."],
        ["left", " ", ">"],
        ["left", ","]
    ],
    "bnf": {
        "ruleset" :[
            [ "selector",   "return $1;"  ],
            [ "ruleset , selector",   "return unionOr($1, $3);"],
            [ "ruleset EOF",   "return $1;"  ]
        ],
        "selector": [
            ["simple_selector", "$$ = $1;"],
            ["selector space simple_selector", "$$ = descendantUnion($1, $3);"],
            ["selector > simple_selector", "$$ = childrenUnion($, $3);"]
        ],
        "simple_selector" : [
            ["*", "$$ = 'createFilterAny()';"],
            ["identity", "$$ = createFilterType($1);"],
            [". identity", "$$ = createFilterName($2);"],
            ["simple_selector . identity", "$$ = unionAnd($1, createFilterName($3));"]
        ]
    }
}